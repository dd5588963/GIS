<!DOCTYPE HTML PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <title>军标标绘</title>
    <link href="libs/ol5/ol.css" rel="stylesheet" type="text/css" />
    <!--  引入第三方插件库 -->
    <script src="src/jquery-1.11.1.min.js" type="text/javascript"></script>
    <script src="libs/ol5/MapGis_ol_product.js"></script>

    <link href="libs/themes/default/easyui.css" rel="stylesheet" type="text/css" />
    <link href="libs/themes/icon.css" rel="stylesheet" type="text/css" />
    <link href="libs/themes/color.css" rel="stylesheet" type="text/css" />
    <script src="libs/jquery.easyui.min.js" type="text/javascript"></script>
    <link href="../../libs/colorPicker/js_color_picker_v2.css" rel="stylesheet" type="text/css" />
    <script src="../../libs/colorPicker/js_color_picker_v2.js" type="text/javascript"></script>
    <script src="../../libs/colorPicker/color_functions.js" type="text/javascript"></script>
    <script type="text/javascript">
        //地图容器
        var map;
        //军标绘制图层
        var drawLayer;
        //矢量资源
        var source;
        //绘制工具
        var drawTool;
        //修改工具
        var modifyTool;
        //移动工具
        var dragTool;
        //选择工具
        var selectTool;
        //拉框选择工具
        var boxSelectTool;
        //选中要素数组
        var selectedFeatures;
        //样式数组
        var styles;

        //初始化
        function init() {
            source = new ol.source.Vector({ wrapX: false });
            drawLayer = new ol.layer.Vector({
                source: source,
                style: new ol.style.Style({
                    fill: new ol.style.Fill({
                        color: $('#FillClr').val()
                    }),
                    stroke: new ol.style.Stroke({
                        color: $('#LinClr').val(),
                        lineCap: $('#LinHeadType').val(),
                        lineJoin: $('#LinJointType').val(),
                        lineDash: [parseInt($('#LinDash').val()), parseInt($('#LinDot').val())],
                        width: parseInt($('#LinWidth').val())
                    }),
                    image: new ol.style.Circle({
                        radius: parseInt($('#PntRadius').val()),
                        fill: new ol.style.Fill({
                            color: $('#FillClr').val()
                        })
                    })
                })
            });
            //初始化天地图图层
            var layer1 = new Zondy.Map.TianDiTu({
                layerType: Zondy.Enum.Map.TiandituType.VEC_IGS,
                projection: ol.proj.get('EPSG:4326'),
                ip: "develop.smaryun.com",
                port: "6163",    //访问IGServer的端口号，.net版为6163，Java版为8089,
                //天地图key
                token: "b66ca40c27956bec0f3ce4dd2e94235b",
            });
            var layer2 = new Zondy.Map.TianDiTu({
                layerType: Zondy.Enum.Map.TiandituType.CVA_IGS,
                projection: ol.proj.get('EPSG:4326'),
                ip: "develop.smaryun.com",
                port: "6163",   //访问IGServer的端口号，.net版为6163，Java版为8089,
                //天地图key
                token: "b66ca40c27956bec0f3ce4dd2e94235b",
            });
            //初始化地图容器
            map = new ol.Map({
                target: 'mapCon',
                layers: [layer1, layer2, drawLayer, vector2],
                view: new ol.View({
                    center: ol.proj.transform([114.6, 30.4], 'EPSG:4326', 'EPSG:3857'),
                    zoom: 3
                }),

            controls: [
                new ol.control.MousePosition(
                    {
                        target: document.getElementById('mouse-position')
                    }
                )
            ],

            //layers: [
            //    new ol.layer.Tile({
            //        title: "天地图矢量图层",
            //        source: new ol.source.XYZ({
            //            url: "http://t0.tianditu.com/DataServer?T=vec_w&x={x}&y={y}&l={z}&tk=" + "b66ca40c27956bec0f3ce4dd2e94235b",//parent.TiandituKey()为天地图密钥
            //        })
            //    }),
            //    new ol.layer.Tile({
            //        title: "天地图矢量注记图层",
            //        source: new ol.source.XYZ({
            //            url: "http://t0.tianditu.com/DataServer?T=cva_w&x={x}&y={y}&l={z}&tk=" + "b66ca40c27956bec0f3ce4dd2e94235b",//parent.TiandituKey()为天地图密钥
            //        })
            //    }),
            //    /*vectorLayer*/
            //]
            });

            drawTool = new MilStd.tool.MilStdDrawTool(map);
            drawTool.on(MilStd.event.MilStdDrawEvent.DRAW_END, onDrawEnd, false, this);
        }

        //绘制军标
        function drawArrow(type) {
            removeInteractions();
            switch (type) {
                case "SimpleArrow":
                    var milParam = new MilStd.MilstdParams({
                        headHeightFactor: 0.15,
                        headWidthFactor: 0.4,
                        neckHeightFactor: 0.75,
                        neckWidthFactor: 0.1,
                        tailWidthFactor: 0.1,
                        hasSwallowTail: true,
                        swallowTailFactor: 0.1
                    });
                    drawTool.activate(MilStd.EnumMilstdType.SimpleArrow, milParam, "drawSimpleArrow");
                    break;
                case "DoubleArrow":
                    var milParam = new MilStd.MilstdParams({
                        headHeightFactor: 0.15,
                        headWidthFactor: 0.8,
                        neckHeightFactor: 0.7,
                        neckWidthFactor: 0.4
                    });
                    drawTool.activate(MilStd.EnumMilstdType.DoubleArrow, milParam, "drawDoubleArrow");
                    break;
                case "StraightArrow":
                    var milParam = new MilStd.MilstdParams({
                        headHeightFactor: 0.1,
                        headWidthFactor: 1.3,
                        neckHeightFactor: 1.0,
                        neckWidthFactor: 0.7,
                        tailWidthFactor: 0.07,
                        hasSwallowTail: false,
                        swallowTailFactor: 0
                    });
                    drawTool.activate(MilStd.EnumMilstdType.StraightArrow, milParam, "drawStraightArrow");
                    break;
                case "SingleLineArrow":
                    var milParam = new MilStd.MilstdParams({
                        headHeightFactor: 0.1,
                        headWidthFactor: 1.3
                    });
                    drawTool.activate(MilStd.EnumMilstdType.SingleLineArrow, milParam, "drawdrawSingleLineArrow");
                    break;
                case "TriangleFlag":
                case "RectFlag":
                case "CurveFlag":
                    drawTool.activate(type, null, "drawFlag");
                    break;
                    //十字箭头指北针
                case "ArrowCross":
                    //圆形尖角指北针
                case "CircleClosedangle":
                    //尖角指北针
                case "Closedangle":
                    //双向尖角指北针
                case "DoubleClosedangle":
                    //四角指北针
                case "Fourstar":
                    //菱形指北针
                case "Rhombus":
                    //同向尖角指北针
                case "SameDirectionClosedangle":
                    //三角指北针
                case "Triangle":
                    //风向标指北针
                case "Vane":
                    drawTool.activate(type, null, "drawCompass");
                    break;
                    //贝塞尔曲线成区
                case "Bezier":
                    //贝塞尔曲线
                case "BezierLine":
                    //集结区
                case "AssemblyArea":
                    drawTool.activate(type, null, "drawBazier");
                    break;
                default:
            }
        };
        //绘制完成后的回调
        function onDrawEnd(event) {
            var drawStyle = new ol.style.Style({
                fill: new ol.style.Fill({
                    color: $('#FillClr').val()
                }),
                stroke: new ol.style.Stroke({
                    color: $('#LinClr').val(),
                    lineCap: $('#LinHeadType').val(),
                    lineJoin: $('#LinJointType').val(),
                    lineDash: [parseInt($('#LinDash').val()), parseInt($('#LinDot').val())],
                    width: parseInt($('#LinWidth').val())
                }),
                image: new ol.style.Circle({
                    radius: parseInt($('#PntRadius').val()),
                    fill: new ol.style.Fill({
                        color: $('#FillClr').val()
                    })
                })
            });

            var feature = event.feature;
            feature.setStyle(drawStyle);
            source.addFeature(feature);
        }

        //修改军标
        function modifyArrow() {
            removeInteractions();
            modifyTool = new MilStd.ModifyTool(map);
            modifyTool.activate();
        };

        //移动军标
        function moveArrow() {
            removeInteractions();
            dragTool = new MilStd.DragPan(map);
            dragTool.activate();
        };

        //移除选中的军标
        function removeArrow() {
            removeInteractions();

            boxSelectTool = new ol.interaction.DragBox({
                style: new ol.style.Style({
                    stroke: new ol.style.Stroke({
                        color: [0, 0, 255, 1]
                    })
                })
            });
            map.addInteraction(boxSelectTool);
            boxSelectTool.on('boxend', function (e) {
                selectedFeatures = new Array();
                var extent = boxSelectTool.getGeometry().getExtent();
                source.forEachFeatureIntersectingExtent(extent, function (feature) {
                    selectedFeatures.push(feature);
                });
                if (selectedFeatures && selectedFeatures.length > 0) {
                    for (var i = 0; i < selectedFeatures.length; i++) {
                        source.removeFeature(selectedFeatures[i]);
                    }
                }
            });
        }

        var inputObjStyleEx = null;
        //*设置颜色选择器
        function showcolors(ids) {
            var o = document.getElementById(ids);
            inputObjStyleEx = o;
            showColorPicker(o, o, colorchangStyleEx);
        }
        function colorchangStyleEx(e) {
            inputObjStyleEx.style.background = inputObjStyleEx.value;
        }

        //修改样式
        function editGeom() {
            removeInteractions();

            selectTool = new ol.interaction.Select();
            map.addInteraction(selectTool);

            boxSelectTool = new ol.interaction.DragBox({
                style: new ol.style.Style({
                    stroke: new ol.style.Stroke({
                        color: [0, 0, 255, 1]
                    })
                })
            });
            map.addInteraction(boxSelectTool);
            boxSelectTool.on('boxend', function (e) {
                selectedFeatures = new Array();
                styles = new Array();
                var extent = boxSelectTool.getGeometry().getExtent();
                source.forEachFeatureIntersectingExtent(extent, function (feature) {
                    styles.push(feature.getStyle());
                    selectedFeatures.push(feature);
                    var editStyle = getEditStyle();
                    feature.setStyle(editStyle);
                    $('#cancelEditBtn').linkbutton({ disabled: false })
                });
            });

            selectTool.on('select', function (e) {
                styles = new Array();
                selectedFeatures = e.selected;
                if (selectedFeatures && selectedFeatures.length > 0) {
                    for (var i = 0; i < selectedFeatures.length; i++) {
                        styles.push(selectedFeatures[i].getStyle());
                        var editStyle = getEditStyle();
                        selectedFeatures[i].setStyle(editStyle);
                    }
                }
                $('#cancelEditBtn').linkbutton({ disabled: false })
            });
        }

        //获取表单样式信息
        function getEditStyle() {
            var style = new ol.style.Style({
                fill: new ol.style.Fill({
                    color: $('#FillClr').val()
                }),
                stroke: new ol.style.Stroke({
                    color: $('#LinClr').val(),
                    lineCap: $('#LinHeadType').val(),
                    lineJoin: $('#LinJointType').val(),
                    lineDash: [parseInt($('#LinDash').val()), parseInt($('#LinDot').val())],
                    width: parseInt($('#LinWidth').val())
                }),
                image: new ol.style.Circle({
                    radius: parseInt($('#PntRadius').val()),
                    fill: new ol.style.Fill({
                        color: $('#FillClr').val()
                    })
                })
            });

            return style;
        }
        //撤销样式修改
        function cancelEditGeom() {
            if (selectedFeatures && selectedFeatures.length > 0) {
                for (var i = 0; i < selectedFeatures.length; i++) {
                    selectedFeatures[i].setStyle(styles[i]);
                }
            }
            selectedFeatures = new Array();
            styles = new Array();
            $('#cancelEditBtn').linkbutton({ disabled: true });
        }

        //移除所有控件
        function removeInteractions() {
            $('#cancelEditBtn').linkbutton({ disabled: true });

            if (drawTool) {
                drawTool.deactivate();
            }
            if (modifyTool) {
                modifyTool.deactivate();
            }
            if (dragTool) {
                dragTool.deactivate();
            }
            if (selectTool) {
                map.removeInteraction(selectTool);
            }
            if (boxSelectTool) {
                map.removeInteraction(boxSelectTool);
            }
        }

        //清除所有要素
        function removeAllFeatures() {
            removeInteractions();
            source.clear();
        }


        //创建一个线
        var Line = new ol.Feature({
            geometry: new ol.geom.LineString
                ([[12916400.514945555, 2985463.338357315], [12761666.422764445, 2920027.708216757], [12590234.406966666, 2980514.6305977157],
                    [12444405.874047777, 3062384.9770083823], [12246257.180463333, 3132220.049017839], [12085957.113743331, 3295702.920405123],
                    [11753111.836317778, 3290643.3073263373], [11881129.250712223, 3365467.7620210475], [12050334.876694443, 3192356.638662258],
                    [11902279.95396, 3217490.915374336], [11911185.513222221, 3130969.957757931], [11822129.920599999, 3083548.5483401846],
                    [11893374.394697778, 2999080.9430531673], [11695225.701113334, 2932351.8961626184], [11441417.26214, 2923723.8920718003],
                    [11382417.932027778, 3086040.4508996094], [11369059.593134444, 3272949.6297109295], [11374625.567673333, 3401126.2635930497],
                    [11371285.98295, 3489418.1905337004], [11472586.719557779, 3846295.003527139], [11568321.481626667, 4066461.436534013],
                    [11873336.886357777, 4256678.731311091], [12070372.385034444, 4453054.6782462085], [11680754.167312223, 4277254.7759383] ])
        });

        //设置线的样式
        Line.setStyle(new ol.style.Style({
            //填充色
            fill: new ol.style.Fill({
                color: 'rgba(255, 255, 255, 0.2)'
            }),
            //边线颜色
            stroke: new ol.style.Stroke({
                color: '#b22222',
                width: 5
            }),
            //形状
            image: new ol.style.Circle({
                radius: 7,
                fill: new ol.style.Fill({
                    color: '#b22222'
                })
            })
        }));

        //实例化一个矢量图层Vector作为绘制层
        var source2 = new ol.source.Vector({
            features: [Line]
        });
        //创建一个图层
        var vector2 = new ol.layer.Vector({
            source: source2
        });
        //将绘制层添加到地图容器中
        /*map.addLayer(vector2);*/
    </script>
</head>
<body onload="init()">
    <div id="mapCon" style="position: absolute; width: 100%; height: 95%;">
    </div>
    <div id="editGeomWin" class="easyui-window" data-options="title:'军标',closed:false,maximizable:false,minimizable:false,closable:false"
         style="width: 450px; height: 516px; padding: 5px; left: 60px; top: 20px;">
        <div class="easyui-layout" data-options="fit:true">
            <div data-options="region:'center',border:false">
                <div class="easyui-tabs" fit="true">
                    <div title="图形编辑" style="padding: 10px;">
                        <div class="itembox" style="border: 1px dashed gray; padding: 5px; width: 390px;
                            height: 340px">
                            <table>
                                <tr>
                                    <td>
                                        <p style="font-weight: bold">
                                            箭头&nbsp;
                                        </p>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/custom_tail_arrow.png" title="简单箭头" style="cursor: pointer;"
                                                 onclick="drawArrow('SimpleArrow')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/stright_arrow.png" title="直箭头" style="cursor: pointer;"
                                                 onclick="drawArrow('StraightArrow')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/double_arrow.png" title="双箭头" style="cursor: pointer;"
                                                 onclick="drawArrow('DoubleArrow')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/singleLine_arrow.png" title="单线箭头" style="cursor: pointer;"
                                                 onclick="drawArrow('SingleLineArrow')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="font-weight: bold">
                                            指北针&nbsp;
                                        </p>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/arrowcross.png" title="十字箭头指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('ArrowCross')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/CircleClosedangleCompass.png" title="圆形尖角指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('CircleClosedangle')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/closedangle.png" title="尖角指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('Closedangle')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/DoubleClosedangleCompass.png" title="双向尖角指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('DoubleClosedangle')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/fourstar.png" title="四角指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('Fourstar')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td></td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/rhombus.png" title="菱形指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('Rhombus')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/SameDirectionClosedangleCompass.png" title="同向尖角指北针"
                                                 style="cursor: pointer;" onclick="drawArrow('SameDirectionClosedangle')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/triangle.png" title="三角指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('Triangle')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/VaneCompass.png" title="风向标指北针" style="cursor: pointer;"
                                                 onclick="drawArrow('Vane')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="font-weight: bold">
                                            旗帜&nbsp;
                                        </p>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/triangle_flag.png" title="三角旗" style="cursor: pointer;"
                                                 onclick="drawArrow('TriangleFlag')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/rect_flag.png" title="矩形旗" style="cursor: pointer;"
                                                 onclick="drawArrow('RectFlag')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/curve_flag.png" title="波浪旗" style="cursor: pointer;"
                                                 onclick="drawArrow('CurveFlag')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="font-weight: bold">
                                            集结区&nbsp;
                                        </p>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/arbitrary_area.png" title="任意区" style="cursor: pointer;"
                                                 onclick="drawArrow('Bezier')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/assembly.png" title="集结区" style="cursor: pointer;"
                                                 onclick="drawArrow('AssemblyArea')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                    <td>
                                        <div style="border: 1px dotted gray; padding: 5px; width: 50px; height: 50px">
                                            <img src="src/images/junbiao/smooth_curve.png" title="光滑曲线" style="cursor: pointer;"
                                                 onclick="drawArrow('BezierLine')" onmouseover="this.style.width='50px';this.style.height='50px';"
                                                 onmouseout="this.style.width='44px';this.style.height='44px';" />
                                        </div>
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div style="text-align: right; margin-top: 5px;">
                            <a class="easyui-linkbutton" onclick="modifyArrow()" title="单击此按钮后用鼠标左键选中图形进行修改">修改图形</a>
                            <a class="easyui-linkbutton" onclick="moveArrow()" title="单击此按钮后用鼠标左键移动图形">移动图形</a>
                            <a class="easyui-linkbutton" onclick="removeArrow()" title="单击此按钮后鼠标拉框选中移除图形">移除图形</a>
                        </div>
                    </div>
                    <div title="样式修改" style="padding: 10px; text-align: center;">
                        <div style="padding: 10px; background: #fff; border: 1px solid #ccc; margin-top: 20px;
                            height: 300px">
                            <table id="geomInfoTable" style="line-height: 40px">
                                <tr>
                                    <td width="40%">
                                        <span>填充色</span>
                                    </td>
                                    <td width="60%">
                                        <input type="text" id="FillClr" name="FillClr" onclick="showcolors('FillClr')" style="background-color: #C0C0C0;
                                            margin: 5px;" alt="clrDlgLin" value="#C0C0C0" readonly=readonly />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">
                                        <span>点半径</span>
                                    </td>
                                    <td width="60%">
                                        <input type="text" id="PntRadius" name="PntRadius" style="margin: 5px;" value="10" />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">
                                        <span>线头类型</span>
                                    </td>
                                    <td width="60%">
                                        <select id="LinHeadType" style="width: 170px; margin: 5px;">
                                            <option value="round">圆头</option>
                                            <option value="square">平头</option>
                                            <option value="butt">尖头</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">
                                        <span>拐角类型</span>
                                    </td>
                                    <td width="60%">
                                        <select id="LinJointType" style="width: 170px; margin: 5px;">
                                            <option value="round">圆角</option>
                                            <option value="bevel">平角</option>
                                            <option value="miter">尖角</option>
                                        </select>
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">
                                        <span>线形</span>
                                    </td>
                                    <td width="60%">
                                        <input type="text" id="LinDash" name="LinDash" value="0" style="width: 30px; margin: 5px;" />(dash)
                                        <input type="text" id="LinDot" name="LinDot" value="0" style="width: 30px; margin: 5px;" />(space)
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">
                                        <span>线颜色</span>
                                    </td>
                                    <td width="60%">
                                        <input type="text" id="LinClr" name="OutClr" onclick="showcolors('LinClr')" style="background-color: #000000;
                                            margin: 5px;" alt="clrDlgLin" value="#000000" readonly=readonly />
                                    </td>
                                </tr>
                                <tr>
                                    <td width="40%">
                                        <span>线宽</span>
                                    </td>
                                    <td width="60%">
                                        <input type="text" id="LinWidth" name="OutPenW" style="margin: 5px;" value="2" />
                                    </td>
                                </tr>
                            </table>
                        </div>
                        <div style="text-align: right; margin: 5px;">
                            <a class="easyui-linkbutton" iconcls="icon-ok" onclick="editGeom()">修改样式</a>
                            <a id="cancelEditBtn" class="easyui-linkbutton" iconcls="icon-cancel" onclick="cancelEditGeom()" disabled="true">
                                撤销上次修改
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            <div data-options="region:'south',border:false" style="text-align: right; padding: 5px 0;">
                <a class="easyui-linkbutton" onclick="removeInteractions()">清除状态</a>
                <a class="easyui-linkbutton" onclick="removeAllFeatures()">清空要素</a>
            </div>

        </div>
    </div>
    <p style="position:absolute;right:10px;top:0px;z-index:99999;color:crimson;font-style:oblique">
        返回首页
        <a href="index.asp">
            <img border="0" src="src/images/fanhui.png" width="50" height="50" />
        </a>
    </p>
</body>
</html>
